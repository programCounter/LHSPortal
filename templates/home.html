{% extends 'layout.html' %}

{% block body %}
<h1 id="home-title">Home <small>Welcome {{session.username}}</small></h1>

<!--
<h3 id="power-state-heading"><small>Servers Power States</small></h3>
-->

<h3 id="ports-heading"><small>Ports and Services</small></h3>

<div id="port-table" class="container">
  <table class="table table-hover table-secondary">
    <tr>
      <th>ID</th>
      <th>Service</th>
      <th>IP Address</th>
      <th>Port</th>
      <th>State</th>
    </tr>
    {% set count = [0] %}
    {% for portcheck in portcheck %}
      <tr>
        <td>{{ portcheck.id }}</td>
        <td>{{ portcheck.ServiceName }}</td>
        <td>{{ portcheck.IPAddress }}</td>
        <td>{{ portcheck.Port }}</td>
        <td><strong>{{ state[count[0]] }}</strong></td>
        <td><a href="editPort/{{ portcheck.id }}" class="btn btn-default pullright">Edit</a></td>
        <td>
          <form action="{{ url_for('deleteIP', id=portcheck.id) }}" method="POST">
            <input type="hidden" name="_method" value="DELETE">
            <input type="submit" value="Delete" class="btn btn-danger">
          </form>
        </td>
      </tr>
      {% if count.append(count.pop() + 1) %}{% endif %}
    {% endfor %}
  </table>

  <div id="add-ports" class="container">
    <a class="btn btn-success" href="/addPorts">Add</a>
  </div>

</div>

<div id="DiskSpace" class="container">
  <h3 id="DiskSpace-heading"><small>LHS and LHSWeb Disks</small></h3>

  {% set count = [0] %}
  {% for disksName in disksName %}

  <p><strong>{{ disksName }}</strong><br>
  {{ "Total Space: %.2fGB" % tB[count[0]] }}<br>
  {{ "Used: %.2fGB" % tUS[count[0]] }}<br>
  {{ "Free: %.2fGB" % tSA[count[0]] }}</p>
  <div id="progressBarContainer">
    <div class="progress" style="width: 25%;">
      <div class="progress-bar" role="progressbar" style="width: {{ usedPercent[count[0]]*100 }}%" aria-valuenow="{{ usedPercent[count[0]]*100 }}" aria-valuemin="0" aria-valuemax="100"></div>
      <p><strong>{{ "%.2f" % (usedPercent[count[0]]*100) }} %</strong></p>
    </div>
  </div>

    {% if count.append(count.pop() + 1) %}{% endif %}
  {% endfor %}

</div>

<!--
<div id="portChanges" class="container">
  <p>A log of port state chnages will go here</p>
</div>
-->

{% endblock %}
